var ProfileController=["$scope","$rootScope","$http","$location","$timeout","resolveProfile","gamepinService",function(e,t,n,r,i,s,o){console.log("ProfileController");e.R_Data=s;e.timeline=s.timeline;e.activityPins=s.activityData;e.profile=s.profileData;e.profile.bio=e.profile.bio||null;e.dummyData={badges:[{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"},{url:"http://localhost/images/misc_images/badge1.png"}],followers:[{url:"http://localhost/images/30x30.gif"},{url:"http://localhost/images/30x30.gif"}],following:[{url:"http://localhost/images/30x30.gif"},{url:"http://localhost/images/30x30.gif"}]};e.showPins=e.activityPins;console.log("here");e.groupList=[];e.groupData={};t.css="profile";t.title="profile";e.modals=t.rootPath+"/partials/modals";e.subnav=null;e.nav=t.rootPath+"/partials/navbar";e.content=t.rootPath+"/partials/profile_content";e.groupToggle=false;e.masonInit=true;e.displayMode={};e.displayMode.activity=true;e.displayMode.group=false;e.FOLLOW=1;e.FRIEND=2;e.GROUPS=1;e.POSTS=2;e.LIKES=3;e.ACTIVITY=4;e.people_tab=e.FOLLOW;e.content_tab=e.ACTIVITY;e.timeline_tab="showAll";e.bigPin={};e.bigFollowBtn=false;e.changeImage=false;e.changeState=function(){e.masonInit=false};for(var u in e.timeline){var a=e.timeline[u];if(a.action==="commentPosted"){a.message="Comment posted to "+a.target;switch(a.target){case"Action & Adventure":a.sourceImg="/images/caticon-action22x22.png";break;case"Arcade":a.sourceImg="/images/caticon-arcade22x22.png";break;case"Board & Card":a.sourceImg="/images/caticon-card22x22.png";break;case"Casino & Gambling":a.sourceImg="/images/caticon-casino22x22.png";break;case"Educational":a.sourceImg="/images/caticon-educational22x22.png";break;case"Family & Kids":a.sourceImg="/images/caticon-family22x22.png";break;case"Music & Rhythm":a.sourceImg="/images/caticon-music22x22.png";break;case"Puzzle":a.sourceImg="/images/caticon-puzzle22x22.png";break;case"Racing":a.sourceImg="/images/caticon-racing22x22.png";break;case"Role Playing":a.sourceImg="/images/caticon-rpg22x22.png";break;case"Simulation":a.sourceImg="/images/caticon-simulation22x22.png";break;case"Sports":a.sourceImg="/images/caticon-sports22x22.png";break;case"Strategy":a.sourceImg="/images/caticon-strategy22x22.png";break;case"Trivia & Word":a.sourceImg="/images/caticon-arcade22x22.png";break;default:alert("event image: default case");break}}else if(a.action==="gamepinPosted"){a.message="Posted to "+a.target;switch(a.target){case"Action & Adventure":a.sourceImg="/images/caticon-action22x22.png";break;case"Arcade":a.sourceImg="/images/caticon-arcade22x22.png";break;case"Board & Card":a.sourceImg="/images/caticon-card22x22.png";break;case"Casino & Gambling":a.sourceImg="/images/caticon-casino22x22.png";break;case"Educational":a.sourceImg="/images/caticon-educational22x22.png";break;case"Family & Kids":a.sourceImg="/images/caticon-family22x22.png";break;case"Music & Rhythm":a.sourceImg="/images/caticon-music22x22.png";break;case"Puzzle":a.sourceImg="/images/caticon-puzzle22x22.png";break;case"Racing":a.sourceImg="/images/caticon-racing22x22.png";break;case"Role Playing":a.sourceImg="/images/caticon-rpg22x22.png";break;case"Simulation":a.sourceImg="/images/caticon-simulation22x22.png";break;case"Sports":a.sourceImg="/images/caticon-sports22x22.png";break;case"Strategy":a.sourceImg="/images/caticon-strategy22x22.png";break;case"Trivia & Word":a.sourceImg="/images/caticon-arcade22x22.png";break;default:alert("event image: default case");break}}else if(a.action==="followSent"){a.message="Following "+a.targetData.userName;a.sourceImg=a.targetData.profileImg||"/images/30x30.gif"}else if(a.action==="friendAccepted"){if(a.targetData.userName!==e.profile.userName){a.message="Friended "+a.targetData.userName;a.sourceImg=a.targetData.profileImg||"/images/30x30.gif";a.targetLink="/user/"+a.targetData.userName}else{a.message="Friended "+a.sourceData.userName;a.sourceImg=a.sourceData.profileImg||"/images/30x30.gif";a.targetLink="/user/"+a.sourceData.userName}}}e.setup=function(){"setup profile UI";$(window).scroll(function(){if($(this).scrollTop()>200){$("#scrollup").fadeIn()}else{$("#scrollup").fadeOut()}});var t=$(".change_avatar");e.scrollup=function(){"scrollup";$("html, body").animate({scrollTop:0},600)}};e.ajaxLogout=function(){t.logout(function(t){if(t.message)e.status=t.message})};e.viewBigPin=function(r){$(".view_vid").empty();o.getPinData(r.id,function(i){e.bigPin=r;e.bigPin.gameName=i.gameName;e.bigPin.publisher=i.publisher;e.bigPin.datePosted=i.datePosted;e.bigPin.videoEmbed=i.videoEmbed;e.bigPin.comments=i.comments;e.bigPin.profileImg=i.profileImg||t.rootPath+"/images/30x30.gif";if(e.bigPin.videoEmbed){var s=$.parseHTML(e.bigPin.videoEmbed);s[0].width="560";s[0].height="341";$(".view_vid").append(s)}$("#gamePinModal").modal({dynamic:true});n({method:"post",url:"/api/getFollowers",data:{email:t.userEmail}}).success(function(n,r,i,s){if(n.error)t.popNotify("Error",n.error);else if(n.success){var o=n.following;var u=$("#gamePinModal .follow");if(o.indexOf(e.bigPin.posterId)!==-1)e.bigFollowBtn=false;else e.bigFollowBtn=true}}).error(function(e,t,n,r){console.log(e)})})};e.addBigComment=function(r,i){e.bigPin.comments.push({posterName:t.userName,content:r,posterImg:t.userImg});n({method:"post",url:"/api/gamepin/addComment",data:{pinId:e.bigPin.id,posterId:t.userEmail,posterName:t.userName,content:r}}).success(function(e,t,n,r){$("textarea.view_respond_txtarea").val("")}).error(function(e,t,n,r){})};e.toggleCategories=function(){if(!e.groupToggle){$("#view_groups .dropdown-menu").css("display","block");e.groupToggle=true}else{"hide";$("#view_groups .dropdown-menu").css("display","none");e.groupToggle=false}};e.getGroupData=function(){e.displayMode.activity=false;e.displayMode.group=true;n({method:"post",url:"/api/user/getGroups",data:{userName:e.profile.userName}}).success(function(t,n,r,i){e.groupList=[];e.groupData=t.groups;for(var s in t.groups){e.groupList.push(s)}e.showPins=null}).error(function(e,t,n,r){console.log(e)})};e.showGroup=function(t){e.showPins=e.groupData[t]};e.showActivity=function(){e.displayMode.activity=true;e.displayMode.group=false;e.showPins=e.activityPins};e.showLikes=function(){n({method:"post",url:"/api/user/getLikedPins",data:{email:e.profile.email,pinIds:e.profile.likes}}).success(function(n,r,i,s){if(n.error)t.popNotify("Error",n.error);else if(n.likedPins){e.showPins=n.likedPins}}).error(function(e,t,n,r){console.log(e)})}}];ProfileController.resolve={resolveProfile:["$q","$rootScope","$location","$http","$timeout",function(e,t,n,r,i){var s=e.defer();t.checkLogin(function(e,i){if(e)s.reject(e);else if(!i)n.path("/");else{r({method:"post",url:"/api/user/getProfile",data:{userName:t.userName}}).success(function(e,t,n,r){if(e.error)s.reject();s.resolve(e)}).error(function(e,t,n,r){s.reject(e)})}});return s.promise}]}